<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="fx.js"></script>
</head>
<body>
    <h2>7. indexBy</h2>
    <h5>데이터 조회 비용을 낮추자 !</h5>
    <script>
        const object = entries => _.go(
            entries,
            L.map(([k, v]) => ({[k]:v })),
            _.reduce(Object.assign)
        );
        
        const users = [
            {id: 5, name: 'AA', age: 35},
            {id: 10, name: 'BB', age: 26},
            {id: 19, name: 'CC', age: 27},
            {id: 23, name: 'DD', age: 13},
            {id: 24, name: 'EE', age: 45}
        ]
        const users2 = _.indexBy(u => u.id, users);
        console.log(users2);

        // 인덱스는 필터링 불가
        // 이터러블로 바꿔주어야 함!
        const users3 = _.go(
            users2,
            L.entries,
            L.filter(([_, {age}]) => age < 30),
            L.take(2),
            object
        );
        console.log(users3[19]);
    </script>
</body>
</html>